<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<style type="text/css">
		li{margin: 10px;5px}
	</style>
	<body>
		<ul>
			<li id ="meat">
				<input type="checkbox" name="" id="" value="" class="chk"/>
				<button type="button" value="0">-</button>
				<span>0</span>件
				<button type="button" value="0">+</button>
				<span>4.50</span>元
				结果:<input type="" name="" id="" value="" />
			</li>
			<li>
				<input type="checkbox" name="" id="" value="" class="chk"/>
				<button type="button" value="1">-</button>
				<span>0</span>件
				<button type="button" value="1">+</button>
				<span>3.70</span>元
				结果:<input type="" name="" id="" value="" />
			</li>
			<li>
				<input type="checkbox" name="" id="" value=""class="chk" />
				<button type="button" value="2">-</button>
				<span>0</span>件
				<button type="button" value="2">+</button>
				<span>2.80</span>元
				结果:<input type="" name="" id="" value="" />
			</li>
			<li>
				<input type="checkbox" name="" id="" value="" class="chk"/>
				<button type="button" value="3">-</button>
				<span>0</span>件
				<button type="button" value="3">+</button>
				<span>1.90</span>元
				结果:<input type="" name="" id="" value="" />
			</li>
			<li>
				<input type="checkbox" name="" id="" value="" class="chk"/>
				<button type="button" value="4">-</button>
				<span>0</span>件
				<button type="button" value="4">+</button>
				<span>4.10</span>元
				结果:<input type="" name="" id="" value="" />
			</li>
			<li>
				<input type="checkbox" name="" id="" value="" class="chk"/>
				<button type="button" value="5">-</button>
				<span>0</span>件
				<button type="button" value="5">+</button>
				<span>2.30</span>元
				结果:<input type="" name="" id="" value="" />
			</li>
			<li>
				<input type="checkbox" name="" id="" value="" class="chk"/>
				<button type="button" value="6">-</button>
				<span>0</span>件
				<button type="button" value="6">+</button>
				<span>3.90</span>元
				结果:<input type="" name="" id="" value="" />
			</li>
		</ul>
		<div>
			<label>全选
			<input type="checkbox" name="" id="allin" value="" /></label>
			<span>商品总计：<span id="cn"></span>价格总计：<span id='cm'></span></span>
		</div>
	</body>
</html>
<script type="text/javascript">
	var btn = document.getElementsByTagName("button")
	var span = document.getElementsByTagName("span")
	var input = document.getElementsByTagName("input")
	var cn = document.getElementById('cn')
	var cm = document.getElementById('cm')
	var allin = document.getElementById('allin')
	var price = [4.5,3.7,2.8,1.9,4.1,2.3,3.9]
	var n = 0
	var m = 0
	var chk = document.getElementsByClassName('chk')
	for(var a = 0;a<btn.length;a++){
		btn[a].onclick = function(){
			var b = 0
			for(;;b++){
				if(b == this.value){
					break
				}
			}
			if(this.innerHTML == "+"){
				span[b*2].innerHTML = (span[b*2].innerHTML)*1+1
				if(chk[b].checked){
				cn.innerHTML = cn.innerHTML*1+1
				cm.innerHTML = (price[b]*1000+cm.innerHTML*1000)/1000	
				}
			}
			if(this.innerHTML == "-" && span[b*2].innerHTML != 0){
				span[b*2].innerHTML = (span[b*2].innerHTML)*1-1
				if(chk[b].checked){
				cn.innerHTML = cn.innerHTML*1-1
				cm.innerHTML = (cm.innerHTML*1000-price[b]*1000)/1000	
				}
			}
			input[b*2+1].value = (span[b*2].innerHTML*10000)*(price[b]*10000)/100000000
		}
	}
	for(var a = 0;a<chk.length;a++){
		chk[a].inx = a
		chk[a].onchange = function(){
			if(this.checked == true){
				if(db() == 7){
					allin.checked = true
				}
				m = input[this.inx*2+1].value*1000
				n = span[this.inx*2].innerHTML*1
				cn.innerHTML = n+cn.innerHTML*1
				cm.innerHTML = (m+cm.innerHTML*1000)/1000
				m = 0
				n = 0
			}
			if(this.checked == false){
				allin.checked = false
				m = input[this.inx*2+1].value*1000
				n = span[this.inx*2].innerHTML*1
				cn.innerHTML = cn.innerHTML*1-n
				cm.innerHTML = (cm.innerHTML*1000-m)/1000
				m = 0
				n = 0
			}
		}
	}
	allin.onchange = function(){
		if(allin.checked == true){
			for(var c = 0;c<7;c++){
				chk[c].checked = true
				m += input[c*2+1].value*1000
				n += span[c*2].innerHTML*1
				cn.innerHTML = n
				cm.innerHTML = m/1000
			}
		}else{
			for(var a = 0;a<7;a++){
				chk[a].checked = false
				cn.innerHTML = 0
				cm.innerHTML = 0
				m = 0
				n = 0
			}
		}
	}
	var db = function(){
		var cont = 0
		for(var a = 0;a<7;a++){
			if(chk[a].checked){
				cont++
			}
		}return cont
	}
</script>